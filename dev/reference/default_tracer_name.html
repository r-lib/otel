<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Default tracer name (and meter and logger name) for an R package — default_tracer_name • otel</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Default tracer name (and meter and logger name) for an R package — default_tracer_name"><meta name="description" content="Exporters, like the ones in the otelsdk package, can use this function
to determine the default tracer name, if the instrumentation author
hasn't specified one. If you are an instrumentation author, you probably
do not need to call this function directly, but do read on to learn
about choosing and setting the tracer name."><meta property="og:description" content="Exporters, like the ones in the otelsdk package, can use this function
to determine the default tracer name, if the instrumentation author
hasn't specified one. If you are an instrumentation author, you probably
do not need to call this function directly, but do read on to learn
about choosing and setting the tracer name."><meta name="robots" content="noindex"><script defer data-domain="all.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">otel</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-getting-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Getting Started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-getting-started"><li><a class="dropdown-item" href="../reference/gettingstarted.html">Instrumenting R Packages</a></li>
    <li><a class="external-link dropdown-item" href="https://otelsdk.r-lib.org/reference/collecting.html">Collecting Telemetry Data (otelsdk package)</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Default tracer name (and meter and logger name) for an R package</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/otel/blob/main/R/tracer-name.R" class="external-link"><code>R/tracer-name.R</code></a></small>
      <div class="d-none name"><code>default_tracer_name.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Exporters, like the ones in the otelsdk package, can use this function
to determine the default tracer name, if the instrumentation author
hasn't specified one. If you are an instrumentation author, you probably
do not need to call this function directly, but do read on to learn
about choosing and setting the tracer name.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">default_tracer_name</span><span class="op">(</span>name <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>Custom tracer name. If <code>NULL</code> then otel will construct a
a tracer (meter, logger) name according to the algorithm detailed
below.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with entries:</p><ul><li><p><code>name</code>: The supplied or auto-detected tracer name.</p></li>
<li><p><code>package</code>: Auto-detected package name or <code>NA</code>.</p></li>
<li><p><code>on</code>: Whether tracing is enabled for this package.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="about-tracer-names">About tracer names<a class="anchor" aria-label="anchor" href="#about-tracer-names"></a></h3>


<p>The name of a tracer identifies an OpenTelemetry instrumentation scope.
Instrumentation scopes can be used to organize the collected telemetry
data. otel can also use instrumentation scopes to suppress emitting
unneeded telemetry data, see '<a href="environmentvariables.html">Environment Variables</a>'.</p>
<p>For the otel R package it makes sense to create a separate
instrumentation scope for each R package that emits telemetry data.
otel can do this automatically, with some from the package author.</p>
</div>

<div class="section">
<h3 id="setting-the-tracer-name">Setting the tracer name<a class="anchor" aria-label="anchor" href="#setting-the-tracer-name"></a></h3>


<p>As a package author, you can define the <code>otel_tracer_name</code> symbol in
your package and set it do the desired tracer name. For example, the
callr package has this in an <code>.R</code> file:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>otel_tracer_name <span class="ot">&lt;-</span> <span class="st">"org.r-lib.callr"</span></span></code></pre><p></p></div>
<p>See below for tips on choosing a tracer name.</p>
<p>If you don't like the default tracer name, you can call <code><a href="get_tracer.html">get_tracer()</a></code>
(or <code><a href="get_logger.html">get_logger()</a></code> or <code><a href="get_meter.html">get_meter()</a></code> manually with the desired name.</p>
</div>

<div class="section">
<h3 id="automatic-tracer-name-detection-in-otel">Automatic tracer name detection in otel<a class="anchor" aria-label="anchor" href="#automatic-tracer-name-detection-in-otel"></a></h3>


<p>This is the detailed algorithm that otel uses in <code>default_tracer_name</code>:</p><ul><li><p>Using <code><a href="https://rdrr.io/r/base/ns-topenv.html" class="external-link">base::topenv()</a></code> it finds the calling package (or other top
level environment), recursively.</p></li>
<li><p>It ignores the otel and otelsdk packages while searching.</p></li>
<li><p>If it finds the base environment or the global environment, then
it returns <code>org.project.R</code> as the tracer name.</p></li>
<li><p>Otherwise it looks for the <code>otel_tracer_name</code> symbol inside the top
level environment it has found. If this symbol exists then it must be
a string scalar and otel will use it as the tracer name.</p></li>
<li><p>If this symbol does not exist, then otel will use
<code>r.package.&lt;environment-name&gt;</code> as the tracer name.
<code>&lt;environment-name&gt;</code> is usually the package name.</p></li>
</ul></div>

<div class="section">
<h3 id="choosing-a-tracer-name">Choosing a tracer name<a class="anchor" aria-label="anchor" href="#choosing-a-tracer-name"></a></h3>


<p>The <a href="https://opentelemetry.io/docs/specs/otel/trace/api/#get-a-tracer" class="external-link">OpenTelemetry specification</a> recommends using a tracer name that identifies the instrumentation
scope, i.e. your package.</p>
<p>Some tips on choosing the tracer name:</p><ul><li><p>If your R package can be associated with a URL, you can use the
"reverse" of that URL. E.g. since the callr package's online manual
is at https://callr.r-lib.org, it can use <code>org.r-lib.callr</code>.</p></li>
<li><p>If your R package belongs to your company, you can use the "reverse"
of the company URL, possibly with an additional prefix. E.g. for the
shiny R package by Posit, <code>co.posit.r-package.shiny</code> seems like a
good name.</p></li>
<li><p>If you don't set <code>otel_tracer_name</code>, then <code>default_tracer_name</code> will
use <code>r.package.&lt;package-name&gt;</code> as the tracer name.</p></li>
</ul></div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">default_tracer_name</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "org.r-project.R"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $package</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "R"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $on</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

